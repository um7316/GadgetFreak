{% extends "base.html" %}

{% block main %}
<div id="breadcrumbs">
    <a href="{% url "index" %}">Home</a>&nbsp;
    > <a href="{% url "device_info" device.id %}">{{ device.title }}</a>&nbsp;
    > <a href="{% url "device_forum" device.id %}">{{ device.title }} Forum</a>&nbsp;
    > {{ topic.name }}
</div>
<main id="device-main">
    <aside id="images" class="aside-left">
        {% if topic.image %}
        <img src="{{ topic.image.url }}" alt="review picture" width=280 height=420 />
        {% endif %}
    </aside>
    <div id="info" class="grow">
        <div id="device-header">
            <h2>{{ topic.name }}</h2>
            {% if topic.score %}
            <div id="review-score">
                {{ topic.score }} stars
            </div>
            {% endif %}
        </div>
        <p>
            {{ topic.contents }}
        </p>
    </div>
</main>
<div class="my-list-wrapper grow comments">
    <h3 class = "my-list-header">Comments:</h3>
    <ul class="my-list" id="topic-list">
        {% for comment in comments %}
        <li>
            <img src="{{ comment.author.profile.profile_img.url }}" alt="profile picture" width=60 height=60 />
            <div class="topic-info">
                <p style="word-break:break-all">{{ comment.contents }}</p>
            </div>
            <div class="device-stats">
                <p>Date: {{ comment.date }}</p>
                <p>Author: {{ comment.author.username }}</p>
            </div>
        </li>
        {% endfor %}
        <li class="my-list-comments">
            {% if user.is_authenticated %}
            <h3>Submit your comment:</h3>
            <form action="#" method="post">
                {% csrf_token %}
                {{ comment_form.contents }}
                <input type="submit" value="Comment" />
            </form>
            {% else %}
            <p>Log in to post your comment.</p>
            {% endif %}
        </li>
        <li class="my-list-pagination">
            {% include "pagination.html" %}
        </li>
    </ul>
</div>
{% endblock %}
